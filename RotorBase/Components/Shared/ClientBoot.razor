@inject UserSession Session
@inject CompareTrayService Compare

@code {
    private bool _initialized;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (_initialized)
        {
            return;
        }

        Session.MarkClientReady();
        Compare.MarkClientReady();

        try { await Session.HydrateAsync(); } catch { }
        try { await Compare.InitializeAsync(); } catch { }

        _initialized = true;
    }
}
